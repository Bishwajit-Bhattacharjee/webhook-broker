// Code generated by Wire. DO NOT EDIT.

//go:generate wire
//+build !wireinject

package main

import (
	"github.com/imyousuf/webhook-broker/config"
	"github.com/imyousuf/webhook-broker/controllers"
	"github.com/imyousuf/webhook-broker/storage"
)

// Injectors from wire.go:

func GetAppVersion() config.AppVersion {
	appVersion := config.GetVersion()
	return appVersion
}

func GetHTTPServer(cliConfig *config.CLIConfig) (*HTTPServiceContainer, error) {
	configConfig, err := config.GetConfigurationFromCLIConfig(cliConfig)
	if err != nil {
		return nil, err
	}
	serverLifecycleListenerImpl := NewServerListener()
	migrationConfig := GetMigrationConfig(cliConfig)
	db, err := storage.GetConnectionPool(configConfig, migrationConfig, configConfig)
	if err != nil {
		return nil, err
	}
	appRepository := storage.NewAppRepository(db)
	statusController := controllers.NewStatusController(appRepository)
	producerRepository := storage.NewProducerRepository(db)
	producerController := controllers.NewProducerController(producerRepository)
	producersController := controllers.NewProducersController(producerRepository, producerController)
	router := controllers.NewRouter(statusController, producersController, producerController)
	server := controllers.ConfigureAPI(configConfig, serverLifecycleListenerImpl, router)
	dataAccessor := storage.NewDataAccessor(db, appRepository, producerRepository)
	httpServiceContainer := NewHTTPServiceContainer(configConfig, serverLifecycleListenerImpl, server, dataAccessor)
	return httpServiceContainer, nil
}
